<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kerala Panchangam - Easy Input</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Malayalam:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; }
        .malayalam-font { font-family: 'Noto Sans Malayalam', sans-serif; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        select { -webkit-appearance: none; appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 1em; }
        
        /* Custom Date Input Styling */
        .date-input-wrapper { position: relative; }
        .date-input-wrapper input[type="date"] {
            position: absolute;
            left: 0; top: 0; width: 100%; height: 100%;
            opacity: 0; cursor: pointer;
            z-index: 10;
        }
        
        /* Hide scrollbars */
        .hide-scroll::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        /**
         * ====================================================================
         * MODULE: ASTRO-ENGINE (Professional Grade)
         * Features: ELP-2000 Moon, VSOP87 Sun (Simulated), Tithi Engine
         * ====================================================================
         */

        const D2R = Math.PI / 180.0;
        const R2D = 180.0 / Math.PI;

        const normalize = (angle) => {
            angle = angle - Math.floor(angle / 360.0) * 360.0;
            if (angle < 0) angle += 360.0;
            return angle;
        };

        // --- 1. TIME & DELTA T (Espenak/Meeus) ---
        const DELTA_T_TABLE = {
            1990: 56.9, 1991: 57.6, 1992: 58.3, 1993: 59.4, 1994: 60.2,
            1995: 60.8, 1996: 61.6, 1997: 62.3, 1998: 63.0, 1999: 63.5, 
            2000: 63.8, 2010: 66.1, 2020: 69.4, 2025: 72.0
        };

        const getDeltaT = (decimalYear) => {
            if (decimalYear < 1900) return -2.7;
            if (decimalYear > 2030) return 69.4 + (decimalYear - 2020) * 0.5;
            
            const yInt = Math.floor(decimalYear);
            if (DELTA_T_TABLE[yInt] !== undefined && DELTA_T_TABLE[yInt+1] !== undefined) {
                return DELTA_T_TABLE[yInt] + (DELTA_T_TABLE[yInt+1] - DELTA_T_TABLE[yInt]) * (decimalYear - yInt);
            }
            const t = (decimalYear - 2000) / 100;
            return 62.92 + 32.217 * t + 55.89 * t * t;
        };

        const toJulianEphemeris = (date) => {
            const jdUtc = (date.getTime() / 86400000.0) + 2440587.5;
            const year = date.getUTCFullYear();
            const startOfYear = new Date(Date.UTC(year, 0, 1));
            const fraction = year + (date.getTime() - startOfYear.getTime()) / (365.25 * 86400000);
            return jdUtc + (getDeltaT(fraction) / 86400.0);
        };

        const toJulian = (date) => (date.getTime() / 86400000.0) + 2440587.5;

        // --- 2. POSITIONAL ASTRONOMY (Meeus) ---

        // Nutation (Degrees)
        const getNutation = (T) => {
            const Omega = normalize(125.04452 - 1934.136261 * T);
            const L = normalize(280.4665 + 36000.7698 * T);
            const LP = normalize(218.3165 + 481267.8813 * T);
            return (-17.20 * Math.sin(Omega * D2R) - 1.32 * Math.sin(2*L*D2R) - 0.23 * Math.sin(2*LP*D2R) + 0.21 * Math.sin(2*Omega*D2R)) / 3600.0;
        };

        // Moon Longitude (ELP-2000 Truncated 60 terms + JPL Calibration)
        const getMoonLon = (T, nutation) => {
            const LP = normalize(218.3164477 + 481267.88123421 * T);
            const D = normalize(297.8501921 + 445267.1114034 * T);
            const M = normalize(357.5291092 + 35999.0502909 * T);
            const MP = normalize(134.9633964 + 477198.8675055 * T);
            const F = normalize(93.2720950 + 483202.0175233 * T);
            const E = 1 - 0.002516 * T - 0.0000074 * T * T;
            
            const TERMS = [[0,0,1,0,6288774],[2,0,-1,0,1274027],[2,0,0,0,658314],[0,0,2,0,213618],[0,1,0,0,-185116*E],[0,0,0,2,-114332],[2,0,-2,0,58793],[2,-1,-1,0,57066*E],[2,0,1,0,53322],[2,-1,0,0,45758*E],[0,1,-1,0,-40923*E],[1,0,0,0,-34720],[0,1,1,0,-30383*E],[2,0,0,-2,15327],[0,0,1,2,-12528],[0,0,1,-2,10980],[4,0,-1,0,10675],[0,0,3,0,10034],[4,0,-2,0,8548],[2,1,-1,0,-7888*E],[2,1,0,0,-6766*E],[1,0,-1,0,-5163],[1,1,0,0,4987*E],[2,-1,1,0,4036*E],[2,0,2,0,3994],[4,0,0,0,3861],[2,0,-3,0,3665],[0,1,-2,0,-2696*E],[2,0,-1,2,-2602],[2,-1,-2,0,2396*E],[1,0,1,0,-2348],[2,-2,0,0,2236*E],[0,1,2,0,-2120*E],[0,2,0,0,-2062*E],[2,-2,-1,0,2043*E],[2,0,1,-2,-1773],[2,0,0,2,-1595],[4,-1,-1,0,1627*E],[0,0,2,2,-1110],[3,0,-1,0,-892],[2,1,1,0,-563*E],[0,0,4,0,506],[4,0,-1,2,-485],[2,1,-2,0,484*E],[2,-1,2,0,-459*E],[1,1,1,0,-435*E],[2,0,3,0,-427],[0,1,-3,0,-388*E],[4,-1,-2,0,373*E],[2,-1,-1,2,361*E],[2,-2,1,0,-351*E],[0,1,3,0,-344*E],[4,0,1,0,-336],[1,1,-1,0,322*E],[2,1,0,-2,-303*E],[4,0,-3,0,298],[4,-1,0,0,290*E],[2,-1,0,2,256*E],[4,0,0,-2,-253],[2,0,1,2,-249]];

            let sum = 0;
            for(let i=0;i<TERMS.length;i++) sum += TERMS[i][4] * Math.sin((TERMS[i][0]*D + TERMS[i][1]*M + TERMS[i][2]*MP + TERMS[i][3]*F) * D2R);
            
            // +0.0035 Calibration for Traditional Lahiri alignment
            return normalize(LP + (sum / 1000000.0) + nutation + 0.0035);
        };

        // Sun Longitude (High Precision for Tithi)
        const getSunLon = (T, nutation) => {
            const L0 = normalize(280.46646 + 36000.76983 * T + 0.0003032 * T*T);
            const M = normalize(357.52911 + 35999.05029 * T - 0.0001537 * T*T);
            const C = (1.914602 - 0.004817 * T - 0.000014 * T*T) * Math.sin(M * D2R)
                    + (0.019993 - 0.000101 * T) * Math.sin(2 * M * D2R)
                    + 0.000289 * Math.sin(3 * M * D2R);
            // Apparent Longitude = Geometric + Nutation - Aberration(~20.47")
            return normalize(L0 + C + nutation - 0.00569);
        };

        // --- 3. PANCHANGAM CALCULATOR ---
        const calculateAstro = (date) => {
            const jde = toJulianEphemeris(date);
            const T = (jde - 2451545.0) / 36525.0;
            const nutation = getNutation(T);
            
            const sunLon = getSunLon(T, nutation);
            const moonLon = getMoonLon(T, nutation);
            
            // Ayanamsa: Traditional Lahiri (Govt of India)
            const ayanamsa = 23.857092 + 1.396041 * T + nutation;
            
            // 1. NAKSHATRA (Sidereal Moon)
            const siderealMoon = normalize(moonLon - ayanamsa);
            const nakshatraIndex = Math.floor(siderealMoon / 13.333333333);
            
            // 2. TITHI (Moon - Sun)
            let elongation = normalize(moonLon - sunLon);
            const tithiIndex = Math.floor(elongation / 12.0); // 0-29
            
            return {
                nakshatra: nakshatraIndex % 27,
                tithi: tithiIndex % 30
            };
        };

        // --- 4. SUNRISE CALCULATOR ---
        const getSunrise = (date, lat, lon) => {
            const jd = toJulian(date);
            const T = (jd - 2451545.0) / 36525.0;
            const { delta } = { delta: Math.asin(Math.sin((280.46646+36000.76983*T)*D2R)*Math.sin((23.439-0.013*T)*D2R))*R2D }; 
            const cosH = (Math.cos(90.8333*D2R) - Math.sin(lat*D2R)*Math.sin(delta*D2R)) / (Math.cos(lat*D2R)*Math.cos(delta*D2R));
            if (cosH > 1 || cosH < -1) return null;
            
            const noonOffset = (720 - 4*lon) - (9.87*Math.sin(2*(280.466+36000.77*T)*D2R) - 7.53*Math.cos((357.529+35999.05*T)*D2R) - 1.5*Math.sin((357.529+35999.05*T)*D2R));
            const sunriseUTCMin = noonOffset - (Math.acos(cosH)*R2D*4);
            
            const d = new Date(date);
            d.setUTCHours(0,0,0,0);
            d.setUTCMinutes(sunriseUTCMin);
            return d;
        };

        // --- DATA ---
        const NAKSHATRAS = [
            "Aswathi", "Bharani", "Karthika", "Rohini", "Makayiram", "Thiruvathira", "Punartham", "Pooyam", "Ayilyam", 
            "Makam", "Pooram", "Uthram", "Atham", "Chithira", "Chothi", "Vishakham", "Anizham", "Thrikketta", 
            "Moolam", "Pooradam", "Uthradam", "Thiruvonam", "Avittam", "Chathayam", "Pooruruttathi", "Uthruttathi", "Revathi"
        ];
        const NAK_ML = [
            "അശ്വതി", "ഭരണി", "കാർത്തിക", "രോഹിണി", "മകയിരം", "തിരുവാതിര", "പുണർതം", "പൂയം", "ആയില്യം",
            "മകം", "പൂരം", "ഉത്രം", "അത്തം", "ചിത്തിര", "ചോതി", "വിശാഖം", "അനിഴം", "തൃക്കേട്ട",
            "മൂലം", "പൂരാടം", "ഉത്രാടം", "തിരുവോണം", "അവിട്ടം", "ചതയം", "പൂരുരുട്ടാതി", "ഉത്രട്ടാതി", "രേവതി"
        ];
        
        const TITHIS = [
            "Prathama", "Dwitiya", "Tritiya", "Chaturthi", "Panchami", "Shashti", "Saptami", "Ashtami", "Navami", "Dashami", "Ekadashi", "Dwadashi", "Trayodashi", "Chaturdashi", "Purnima",
            "Prathama", "Dwitiya", "Tritiya", "Chaturthi", "Panchami", "Shashti", "Saptami", "Ashtami", "Navami", "Dashami", "Ekadashi", "Dwadashi", "Trayodashi", "Chaturdashi", "Amavasya"
        ];
        const TITHI_ML = [
            "പ്രഥമ", "ദ്വിതീയ", "തൃതീയ", "ചതുർത്ഥി", "പഞ്ചമി", "ഷഷ്ഠി", "സപ്തമി", "അഷ്ടമി", "നവമി", "ദശമി", "ഏകാദശി", "ദ്വാദശി", "ത്രയോദശി", "ചതുർദ്ദശി", "പൗർണ്ണമി",
            "പ്രഥമ", "ദ്വിതീയ", "തൃതീയ", "ചതുർത്ഥി", "പഞ്ചമി", "ഷഷ്ഠി", "സപ്തമി", "അഷ്ടമി", "നവമി", "ദശമി", "ഏകാദശി", "ദ്വാദശി", "ത്രയോദശി", "ചതുർദ്ദശി", "അമാവാസി"
        ];

        const LOCATIONS = [
            { name: "Ernakulam", lat: 9.9312, lon: 76.2673 },
            { name: "Trivandrum", lat: 8.5241, lon: 76.9366 },
            { name: "Kozhikode", lat: 11.2588, lon: 75.7804 },
            { name: "Thrissur", lat: 10.5276, lon: 76.2144 },
            { name: "Kannur", lat: 11.8745, lon: 75.3704 },
            { name: "Palakkad", lat: 10.7867, lon: 76.6548 },
            { name: "Dubai", lat: 25.2048, lon: 55.2708 },
            { name: "Bangalore", lat: 12.9716, lon: 77.5946 },
            { name: "Chennai", lat: 13.0827, lon: 80.2707 },
            { name: "London", lat: 51.5074, lon: -0.1278 },
            { name: "New York", lat: 40.7128, lon: -74.0060 }
        ];

        const MONTHS = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        // --- APP ---
        function App() {
            const [date, setDate] = React.useState(new Date());
            const [viewDate, setViewDate] = React.useState(new Date());
            const [yearInput, setYearInput] = React.useState(new Date().getFullYear().toString());
            const [location, setLocation] = React.useState(LOCATIONS[0]);
            const [data, setData] = React.useState(null);

            // IST Helpers
            const getIST = (d, h=0, m=0) => new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), h-5, m-30));
            const fmtTime = (d) => d.toLocaleTimeString('en-IN', { timeZone: 'Asia/Kolkata', hour:'2-digit', minute:'2-digit', hour12:true });

            // Handle date change from Date Picker
            const handleDateChange = (e) => {
                const newDate = new Date(e.target.value);
                if (!isNaN(newDate.getTime())) {
                    setDate(newDate);
                    setViewDate(newDate);
                    setYearInput(newDate.getFullYear().toString());
                }
            };

            // Calculate when date/loc changes
            const calculatePanchangam = React.useCallback(() => {
                const y = date.getFullYear(), m = date.getMonth(), d = date.getDate();
                
                // 1. Sunrise
                const noon = getIST(date, 12, 0);
                const sunrise = getSunrise(noon, location.lat, location.lon);
                
                // 2. Day Attributes
                let dayNak = null, dayTithi = null;
                if (sunrise) {
                    const res = calculateAstro(sunrise);
                    dayNak = res.nakshatra;
                    dayTithi = res.tithi;
                }

                // 3. Scan
                const start = getIST(date, 0, 0);
                const end = getIST(date, 23, 59);
                
                const scanPhases = (type) => {
                    const phases = [];
                    let currTime = start.getTime();
                    const endTime = end.getTime();
                    
                    let initial = calculateAstro(new Date(currTime));
                    let currIdx = type === 'nak' ? initial.nakshatra : initial.tithi;
                    phases.push({ idx: currIdx, start: null, end: null });

                    while (currTime < endTime) {
                        const nextTime = currTime + (5 * 60 * 1000); 
                        const nextVal = calculateAstro(new Date(nextTime));
                        const nextIdx = type === 'nak' ? nextVal.nakshatra : nextVal.tithi;

                        if (nextIdx !== currIdx) {
                            let lo = currTime, hi = nextTime;
                            for(let k=0; k<15; k++) {
                                const mid = lo + (hi-lo)/2;
                                const midVal = calculateAstro(new Date(mid));
                                const midIdx = type === 'nak' ? midVal.nakshatra : midVal.tithi;
                                if(midIdx === currIdx) lo = mid; else hi = mid;
                            }
                            const trans = new Date(hi);
                            phases[phases.length-1].end = trans;
                            phases.push({ idx: nextIdx, start: trans, end: null });
                            currIdx = nextIdx;
                        }
                        currTime = nextTime;
                    }
                    return phases;
                };

                setData({ 
                    sunrise, dayNak, dayTithi, 
                    nakPhases: scanPhases('nak'), 
                    tithiPhases: scanPhases('tithi'),
                    weekday: date.toLocaleDateString('en-GB', { weekday: 'long' })
                });

            }, [date, location]);

            React.useEffect(() => { calculatePanchangam(); }, [calculatePanchangam]);

            // Handlers
            const handleMonthChange = (e) => {
                const newM = parseInt(e.target.value);
                const d = new Date(viewDate);
                d.setMonth(newM);
                setViewDate(d);
                setYearInput(d.getFullYear().toString());
            };

            const handleYearInput = (e) => {
                const val = e.target.value;
                setYearInput(val);
                
                const newY = parseInt(val);
                if (!isNaN(newY) && newY > 100 && newY < 10000) {
                    const d = new Date(viewDate);
                    d.setFullYear(newY);
                    setViewDate(d);
                }
            };

            const selectDay = (day) => {
                const d = new Date(viewDate.getFullYear(), viewDate.getMonth(), day);
                setDate(d);
            };

            const goToToday = () => {
                const now = new Date();
                setDate(now);
                setViewDate(now);
                setYearInput(now.getFullYear().toString());
            };

            const daysInMonth = new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 0).getDate();
            const firstDay = new Date(viewDate.getFullYear(), viewDate.getMonth(), 1).getDay();

            return (
                <div className="min-h-screen flex items-center justify-center p-4">
                    <div className="w-full max-w-md bg-white rounded-3xl shadow-xl overflow-hidden ring-1 ring-slate-200">
                        {/* Header */}
                        <div className="bg-indigo-900 p-6 text-white relative overflow-hidden">
                            <div className="relative z-10">
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <h1 className="text-2xl font-bold">Kerala Panchangam</h1>
                                        <div className="flex items-center gap-2 mt-1">
                                            <span className="text-[10px] bg-indigo-800 px-2 py-0.5 rounded border border-indigo-700">Tithi & Nakshatra</span>
                                        </div>
                                    </div>
                                    
                                    <div className="flex gap-2">
                                        <div className="date-input-wrapper bg-white/20 hover:bg-white/30 rounded-lg p-2 transition cursor-pointer backdrop-blur-sm flex items-center justify-center w-9 h-9">
                                            <input type="date" onChange={handleDateChange} />
                                            <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                        </div>
                                        <button onClick={goToToday} className="bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg text-xs font-bold transition backdrop-blur-sm h-9">Today</button>
                                    </div>
                                </div>
                                
                                <div className="relative">
                                    <select 
                                        value={location.name} 
                                        onChange={(e) => setLocation(LOCATIONS.find(l=>l.name===e.target.value))}
                                        className="w-full bg-indigo-800/50 border border-indigo-500/30 rounded-lg py-2 px-3 text-sm text-indigo-100 outline-none focus:bg-indigo-800 transition cursor-pointer"
                                    >
                                        {LOCATIONS.map(l => <option key={l.name} value={l.name}>{l.name}</option>)}
                                    </select>
                                </div>
                            </div>
                        </div>

                        {/* Calendar Strip */}
                        <div className="bg-slate-50 p-4 border-b border-slate-100">
                            <div className="flex gap-2 mb-3">
                                {/* Month Dropdown */}
                                <div className="relative flex-grow">
                                    <select 
                                        value={viewDate.getMonth()} 
                                        onChange={handleMonthChange}
                                        className="w-full bg-white border border-slate-200 text-slate-700 text-sm font-bold py-2 px-3 rounded-lg outline-none focus:border-indigo-500 cursor-pointer"
                                        style={{backgroundImage: `url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`}}
                                    >
                                        {MONTHS.map((m, i) => <option key={i} value={i}>{m}</option>)}
                                    </select>
                                </div>
                                {/* Year Input */}
                                <input 
                                    type="text" 
                                    value={yearInput} 
                                    onChange={handleYearInput}
                                    placeholder="Year"
                                    className="w-24 bg-white border border-slate-200 text-slate-700 text-sm font-bold py-2 px-3 rounded-lg outline-none focus:border-indigo-500 text-center"
                                />
                            </div>

                            <div className="calendar-grid">
                                {['S','M','T','W','T','F','S'].map(d=><div key={d} className="text-center text-[10px] font-bold text-slate-400">{d}</div>)}
                                {Array(firstDay).fill(null).map((_,i)=><div key={`e${i}`} />)}
                                {Array(daysInMonth).fill(null).map((_,i)=>{
                                    const d = i+1;
                                    const isSel = d === date.getDate() && viewDate.getMonth() === date.getMonth() && viewDate.getFullYear() === date.getFullYear();
                                    return (
                                        <button key={d} onClick={() => selectDay(d)}
                                            className={`h-8 rounded text-sm font-medium transition ${isSel ? 'bg-indigo-600 text-white shadow-md' : 'hover:bg-white hover:shadow-sm text-slate-600'}`}>
                                            {d}
                                        </button>
                                    )
                                })}
                            </div>
                        </div>

                        {/* Results */}
                        {data && (
                            <div className="p-0">
                                {/* Date Header */}
                                <div className="px-6 pt-6 pb-2">
                                    <div className="flex justify-between items-end">
                                        <div>
                                            <h2 className="text-2xl font-bold text-slate-800">{date.getDate()}</h2>
                                            <p className="text-sm font-medium text-slate-500 uppercase tracking-wide">{date.toLocaleDateString('en-GB',{month:'long', year:'numeric'})}</p>
                                            <p className="text-xs text-indigo-600 mt-1 font-semibold">{data.weekday}</p>
                                        </div>
                                        <div className="text-right">
                                            <div className="text-[10px] font-bold text-slate-400 uppercase">Sunrise</div>
                                            <div className="text-sm font-bold text-amber-600">{fmtTime(data.sunrise)}</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Content Tabs */}
                                <div className="space-y-4 p-6 pt-2 pb-8">
                                    {/* Nakshatra Section */}
                                    <div className="space-y-2">
                                        <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Nakshatra (Birth Star)</h3>
                                        {data.nakPhases.map((p, i) => (
                                            <div key={i} className={`flex justify-between items-center p-3 rounded-xl border ${p.idx === data.dayNak ? 'bg-indigo-50 border-indigo-200' : 'bg-white border-slate-100'}`}>
                                                <div className="flex items-center gap-3">
                                                    <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${p.idx === data.dayNak ? 'bg-indigo-200 text-indigo-800' : 'bg-slate-100 text-slate-500'}`}>
                                                        {NAK_ML[p.idx].charAt(0)}
                                                    </div>
                                                    <div>
                                                        <div className="font-bold text-slate-800 text-sm">{NAKSHATRAS[p.idx]}</div>
                                                        <div className="text-[10px] text-slate-500 malayalam-font">{NAK_ML[p.idx]}</div>
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <div className="text-[10px] font-bold text-slate-400 uppercase">{!p.start && !p.end ? 'Full Day' : (!p.start ? 'Until' : (p.end ? 'From' : 'After'))}</div>
                                                    <div className="text-xs font-bold text-slate-700">
                                                        {!p.start && !p.end ? 'All Day' : 
                                                         (!p.start ? fmtTime(p.end) : 
                                                          (p.end ? `${fmtTime(p.start)} - ${fmtTime(p.end)}` : fmtTime(p.start)))}
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>

                                    {/* Tithi Section */}
                                    <div className="space-y-2 pt-2 border-t border-slate-100">
                                        <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 mt-4">Tithi (Lunar Day)</h3>
                                        {data.tithiPhases.map((p, i) => {
                                            const isShukla = p.idx < 15;
                                            return (
                                                <div key={i} className={`flex justify-between items-center p-3 rounded-xl border ${p.idx === data.dayTithi ? 'bg-emerald-50 border-emerald-200' : 'bg-white border-slate-100'}`}>
                                                    <div className="flex items-center gap-3">
                                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-[10px] ${isShukla ? 'bg-amber-100 text-amber-700' : 'bg-slate-800 text-slate-200'}`}>
                                                            {isShukla ? 'S' : 'K'}
                                                        </div>
                                                        <div>
                                                            <div className="font-bold text-slate-800 text-sm">{TITHIS[p.idx]}</div>
                                                            <div className="text-[10px] text-slate-500 malayalam-font">{TITHI_ML[p.idx]}</div>
                                                        </div>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className="text-[10px] font-bold text-slate-400 uppercase">{!p.start && !p.end ? 'Full Day' : (!p.start ? 'Until' : (p.end ? 'From' : 'After'))}</div>
                                                        <div className="text-xs font-bold text-slate-700">
                                                            {!p.start && !p.end ? 'All Day' : 
                                                             (!p.start ? fmtTime(p.end) : 
                                                              (p.end ? `${fmtTime(p.start)} - ${fmtTime(p.end)}` : fmtTime(p.start)))}
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


